<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Baby Shower de Leonardo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/png" href="./img/assets/favicon.png">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bangers:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles/whislist.css">

     <script>
        // Configuraci√≥n de Tailwind para soportar el modo oscuro (importante para los colores del loader)
        tailwind.config = {
            darkMode: 'class', 
            theme: {
                extend: {
                    colors: {
                        'sky-light': '#BDEAFF',
                        'sky-dark': '#1F2937', 
                        'surface-dark': '#374151', 
                        'red-seuss': '#E21B23', 
                        'blue-seuss': '#5EC8F8', 
                    },
                }
            }
        }
    </script>
</head>

<body class="min-h-screen text-black flex flex-col items-center">
    
    <div id="giftDetailModal" class="modal-overlay hidden" onclick="closeModal('giftDetailModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2 id="modalTitle" class="text-2xl font-bold text-red-600 mb-4 text-center">T√≠tulo del Regalo</h2>
            <div class="flex flex-col md:flex-row gap-4 mb-4">
                <img id="modalImage" src="" alt="Imagen del regalo" class="w-full md:w-1/3 h-auto object-cover rounded-lg">
                <div class="w-full md:w-2/3">
                    <p id="modalDetail" class="text-gray-700 mb-3"></p>
                    
                    <p class="font-semibold text-sm mb-2">Total requerido: <span id="requiredCount"></span></p>
                    
                    <p class="font-semibold text-sm">Disponibles para elegir: <span id="availableCount" class="text-green-600"></span></p>
                    <div class="mt-4">
                        <p class="font-bold text-sm text-gray-800 mb-1">Sitios sugeridos:</p>
                        <ul id="modalSites" class="list-disc ml-5 text-sm text-blue-600"></ul>
                    </div>
                </div>
            </div>
            
            <div id="userInteractionArea" class="bg-gray-100 p-4 rounded-lg text-center hidden">
                <p class="font-bold mb-2">¬øCu√°ntos vas a elegir?</p>
                <div class="flex justify-center items-center space-x-4">
                    <button id="decrementBtn" onclick="updateSelection(-1)" class="bg-red-500 text-white p-2 rounded-full w-10 h-10 text-xl font-extrabold transition hover:bg-red-600" disabled>-</button>
                    <span id="selectedCount" class="text-3xl font-bold text-red-600 min-w-[30px]">0</span>
                    <button id="incrementBtn" onclick="updateSelection(1)" class="bg-green-500 text-white p-2 rounded-full w-10 h-10 text-xl font-extrabold transition hover:bg-green-600">+</button>
                </div>
                <p id="saveMessage" class="text-green-600 text-sm mt-2 hidden">¬°Guardado!</p>
            </div>
            
            <div id="noInteractionMessage" class="text-center p-4 rounded-lg bg-yellow-100 hidden">
                <p class="font-semibold text-yellow-800">Debes iniciar sesi√≥n para seleccionar regalos.</p>
            </div>

            <button onclick="closeModal('giftDetailModal')" class="mt-6 w-full bg-gray-200 text-gray-700 font-semibold py-2 rounded-lg transition hover:bg-gray-300">Cerrar</button>
        </div>
    </div>
    
    <div class="stripe"></div>
    <div class="lights">
      <span class="light"></span><span class="light"></span><span class="light"></span><span class="light"></span>
      <span class="light"></span><span class="light"></span><span class="light"></span><span class="light"></span>
      <span class="light"></span><span class="light"></span><span class="light"></span><span class="light"></span>
    </div>

    <canvas id="snow"></canvas>

    <main class="max-w-7xl w-full mx-4 my-10 space-y-12">
      
      <section class="bg-white rounded-3xl shadow-xl p-6 md:p-10 text-center fade-up">
        
        

        <div class="flex justify-center mb-0">
            <div id="hatContainer" class="hat-frame relative w-[200px] sm:w-[240px] md:w-[300px] animate-[floaty_3.5s_ease-in-out_infinite] mb-0">
                
                <div class="hat-lights hidden"></div> 

                <svg viewBox="0 0 300 420" xmlns="http://www.w3.org/2000/svg" class="drop-shadow-xl mx-auto select-none">
                <defs>
                    <filter id="shadow" x="0" y="0" width="300" height="420">
                        <feDropShadow dx="0" dy="6" stdDeviation="6" flood-color="#0E0E10" flood-opacity="0.2"/>
                    </filter>
                </defs>
                <g filter="url(#shadow)">
                    <ellipse cx="150" cy="320" rx="100" ry="25" fill="#FFFFFF" stroke="rgba(0,0,0,0.2)" stroke-width="1.5"/>

                    <rect x="70" y="270" width="160" height="40" fill="#E21B23" rx="5" ry="5"/>
                    <rect x="70" y="230" width="160" height="40" fill="#FFFFFF" rx="5" ry="5"/>
                    <rect x="70" y="190" width="160" height="40" fill="#E21B23" rx="5" ry="5"/>
                    <rect x="70" y="150" width="160" height="40" fill="#FFFFFF" rx="5" ry="5"/>
                    <rect x="70" y="110" width="160" height="40" fill="#E21B23" rx="5" ry="5"/>
                    <rect x="70" y="70" width="160" height="40" fill="#FFFFFF" rx="5" ry="5"/>

                    <path d="M70 70 A80 40 0 0 1 230 70 L230 50 A80 40 0 0 0 70 50 Z" fill="#E21B23"/>
                    <ellipse cx="150" cy="50" rx="80" ry="20" fill="rgba(0,0,0,0.1)"/> <circle cx="150" cy="200" r="8" class="svg-light svg-light-blue"/>
                    <circle cx="100" cy="280" r="8" class="svg-light svg-light-red" style="animation-delay: 0.2s;"/>
                    <circle cx="200" cy="280" r="8" class="svg-light svg-light-white" style="animation-delay: 0.7s;"/>
                    
                    <circle cx="120" cy="130" r="8" class="svg-light svg-light-white" style="animation-delay: 0.4s;"/>
                    <circle cx="180" cy="130" r="8" class="svg-light svg-light-blue" style="animation-delay: 0.9s;"/>
                </g>
            </svg>
            </div>
        </div>

        <h1 class="simplified-title">
            <span role="img" aria-label="party popper">ü•≥</span> 
            <span class="text-black">Baby Shower de</span> 
            <span class="text-blue-600">Leonardo</span> 
            <span role="img" aria-label="party popper">ü•≥</span>
        </h1>

        <div class="countdown-container" id="countdownTimer">
            <div class="countdown-item">
                <div class="countdown-number" id="countdown-days">00</div>
                <div class="countdown-label">D√≠as</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-number" id="countdown-hours">00</div>
                <div class="countdown-label">Horas</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-number" id="countdown-minutes">00</div>
                <div class="countdown-label">Minutos</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-number" id="countdown-seconds">00</div>
                <div class="countdown-label">Segundos</div>
            </div>
        </div>
        
        <p class="text-xl font-medium text-gray-800 mt-0 mb-6" style="margin-top: 0; padding-top: 0;">
            ¬°Espera pronto la mesa de los deseos, ya casi est√° lista! üöß
        </p>
        
        <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-800 p-4 rounded-lg shadow-inner inline-block text-left max-w-md mx-auto">
            <p class="font-bold text-lg mb-1">üìÖ Fecha: S√°bado, 13 de diciembre de 2025</p>
            <p class="font-bold text-lg mb-1">‚è∞ Hora: 03:00 p.m.</p>
            
            <p class="font-bold text-lg location-line">
                <span class="location-text">üìç Lugar: Sal√≥n De Fiestas Cantoya</span>
            </p>
            <a href="#como-llegar" class="map-button font-semibold text-red-600 bg-red-100 hover:bg-red-200 py-1 px-2 rounded-full ml-1 transition">Ver direcci√≥n y c√≥mo llegar</a>
        </div>
      </section>

      <section class="fade-up">
        <h2 class="text-3xl font-extrabold text-red-600 text-center mb-6 bg-white p-4 rounded-xl shadow-md">Lista de Deseos: ¬øQu√© sorpresa traer√° el Gato con Sombrero?üé© üéÅ</h2>
        <!-- <h2 class="text-3xl font-extrabold text-red-600 text-center mb-6 bg-white p-4 rounded-xl shadow-md">üößLista de Deseos en construcci√≥nüé©üéÅüöß</h2> -->
        
        <div id="giftCardsContainer" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
            </div>
      </section>
      
      <section id="como-llegar" class="space-y-5">
          <h2 class="text-3xl font-extrabold text-red-600 text-center mb-6 bg-white p-4 rounded-xl shadow-md">Como llegar al evento üìç</h2>
          
          <div class="bg-white rounded-2xl shadow-lg p-5 md:p-6 fade-up space-y-3">
            <p class="font-bold text-lg">¬°La ruta a la fiesta!</p>
            
            <p>
                <span class="font-semibold text-gray-900">Sal√≥n de Fiestas:</span> Sal√≥n De Fiestas Cantoya
                <br>
                <span class="text-sm text-gray-700">Joaqu√≠n de La Cantoya y Rico 100, Jardines de Guadalupe, 58140 Morelia, Michoac√°n.</span>
            </p>

            <div id="distanceCard">
                <div id="distance" class="text-gray-900 font-medium"></div>
                <div id="user-address" class="text-sm text-gray-700"></div>
            </div>
          </div>

          <div class="bg-white rounded-2xl shadow-lg p-4 md:p-5 fade-up">
            <p id="status-message" class="text-sm text-gray-600 mb-3"></p>
            <button id="btn-maps" class="mt-3 w-full bg-[#E21B23] text-white text-xs font-semibold py-2 rounded-full transition hover:bg-red-700">
                        Ir a Google Maps
              </button>
            <div id="map"></div>
              <button id="btn-maps2" class="mt-3 w-full bg-[#E21B23] text-white text-xs font-semibold py-2 rounded-full transition hover:bg-red-700">
                        Ir a Google Maps
              </button>
          </div>
      </section>
      
    </main>

     <div id="loader" class="loader-overlay flex flex-col items-center justify-center">
        <div class="loader-content flex flex-col items-center">
            <div class="loader-hat-container mb-4">
                <svg viewBox="0 0 300 420" xmlns="http://www.w3.org/2000/svg" class="loader-hat">
                    <defs>
                        <filter id="loader-shadow" x="0" y="0" width="300" height="420">
                            <feDropShadow dx="0" dy="6" stdDeviation="6" flood-color="#0E0E10" flood-opacity="0.2"/>
                        </filter>
                    </defs>
                    <g filter="url(#loader-shadow)">
                        <ellipse cx="150" cy="320" rx="100" ry="25" fill="#FFFFFF" stroke="rgba(0,0,0,0.2)" stroke-width="1.5"/>
                        <rect x="70" y="270" width="160" height="40" fill="#E21B23" rx="5" ry="5"/>
                        <rect x="70" y="230" width="160" height="40" fill="#FFFFFF" rx="5" ry="5"/>
                        <rect x="70" y="190" width="160" height="40" fill="#E21B23" rx="5" ry="5"/>
                        <rect x="70" y="150" width="160" height="40" fill="#FFFFFF" rx="5" ry="5"/>
                        <rect x="70" y="110" width="160" height="40" fill="#E21B23" rx="5" ry="5"/>
                        <rect x="70" y="70" width="160" height="40" fill="#FFFFFF" rx="5" ry="5"/>
                        <path d="M70 70 A80 40 0 0 1 230 70 L230 50 A80 40 0 0 0 70 50 Z" fill="#E21B23"/>
                        <ellipse cx="150" cy="50" rx="80" ry="20" fill="rgba(0,0,0,0.1)"/> 
                        
                        <circle cx="150" cy="200" r="8" class="svg-light svg-light-blue"/>
                        <circle cx="100" cy="280" r="8" class="svg-light svg-light-red" style="animation-delay: 0.2s;"/>
                        <circle cx="200" cy="280" r="8" class="svg-light svg-light-white" style="animation-delay: 0.7s;"/>
                        <circle cx="120" cy="130" r="8" class="svg-light svg-light-white" style="animation-delay: 0.4s;"/>
                        <circle cx="180" cy="130" r="8" class="svg-light svg-light-blue" style="animation-delay: 0.9s;"/>
                    </g>
                </svg>
            </div>
            <p class="text-xl font-bold text-red-seuss dark:text-blue-seuss animate-pulse">¬°La aventura est√° por comenzar!</p>
        </div>
    </div>

    <footer class="py-6 text-sm text-gray-700 text-center fade-up">¬°Ven y √∫nete a la diversi√≥n!</footer>

    <script src="./js/wishlistapi.js"></script>
    <script src="./js/wishlist.js"></script>
</body>
</html>